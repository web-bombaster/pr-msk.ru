document.addEventListener('DOMContentLoaded', function () {
	console.log('DOM готов!')
	function loadData() {
	return new Promise((resolve, reject) => {
	  	// setTimeout не является частью решения
	  	// Код ниже должен быть заменен на логику подходящую для решения вашей задачи
		setTimeout(resolve, 100);
	})
};

loadData()
	.then(() => {
		let preloaderEl = document.getElementById('preloader');
		preloaderEl.classList.add('hidden');
		preloaderEl.classList.remove('visible');
	});if (document.querySelector('.js-burger')) {

    const btnBurger = document.querySelectorAll('.js-burger');

    // Открыть / закрыть бургер по клику на него
    function btnBurgerToggle(e) {
        e.target.classList.toggle('toggle');
    }

    btnBurger.forEach(element => {
        element.addEventListener("click", btnBurgerToggle);
        // window.addEventListener("resize", btnBurgerToggleClassRemove);
    });
}if (document.querySelector('.jsMobileMenuBtnToggle')) {

    let menuPanelInit = function () {
        const menuBtn = document.querySelector('.jsMobileMenuBtnToggle');
        const menu = document.querySelector('.mobile-menu');
        const body = document.querySelector('body');
        // const menuLink = document.querySelectorAll('.menu-link'); // для  меню по секциям
    
        // Показать / скрыть мобильное меню - toggle
        function menuPanelToggle() {
            if (menuBtn.classList.contains('toggle')) {
                menu.classList.add('toggle');
                body.classList.add('toggle');
            } else {
                menu.classList.remove('toggle');
                body.classList.remove('toggle');
            };
        };
    
        // Определяем высоту мобильного меню и размещаем под шапкой
        function menuPanelPosition() {
            const heightViewport = document.documentElement.clientHeight;
            const heightHeader = document.querySelector('.header').offsetHeight;
            const heightMenuOverlay = heightViewport - heightHeader;
            // let posTop = window.pageYOffset;
            let posTop = window.scrollY;
    
            const menuActive = document.querySelector('.mobile-menu.toggle');
    
            if (menuActive) {
                menuActive.style.height = heightMenuOverlay + 'px';
                menuActive.style.top = posTop + heightHeader + 'px';
            };
        };
    
        // Закрыть мобильное меню
        function menuPanelClose() {
            menuBtn.classList.remove('toggle');
            menu.classList.remove('toggle');
            body.classList.remove('toggle');
        };

        // Закрываем мобильное меню по клику вне его
        function menuPanelOnClickClose() {
            document.addEventListener("click", function(e) {
                const target = e.target;
                const its_menu = target == menu || menu.contains(target);
                const its_btnMenu = target == menuBtn;
    
                if (!its_menu && !its_btnMenu) {
                    menuPanelClose();
                };
            });
        };
    
        // Закрыть мобильное меню при resize
        window.addEventListener('resize', function () {
            menuPanelClose();
        }, true);
    
        // Закрываем меню (для меню по секциям)
        // menuLink.forEach(element => {
        //     element.addEventListener("click", menuPanelClose);
        // });
    
        // Показать / скрыть мобильное меню
        let menuLaunch = function() {
            menuPanelToggle();
            menuPanelPosition();
            menuPanelOnClickClose();
        };

        menuBtn.addEventListener("click", menuLaunch);
    };

    menuPanelInit();

};// функция будет перемещать блок в указанное место при определенной ширине экрана

let moving = function () {

    const windowWidth = window.innerWidth; // ширина экрана
    // console.log(windowWidth);

    // перемещение меню
    if (windowWidth <= 600) {
        document.querySelector('.mobile-menu__wrapper').prepend(document.querySelector('.header-menu'));
    } else {
        document.querySelector('.header-nav').append(document.querySelector('.header-menu'));
    };

    // перемещение копирайта
    if (windowWidth <= 600) {
        document.querySelector('.footer-col__03').append(document.querySelector('.footer-box__copy'));
    } else {
        document.querySelector('.footer-col__01').append(document.querySelector('.footer-box__copy'));
    };

    // перемещение footer-contacts
    if (windowWidth <= 600) {
        document.querySelector('.footer-col__01').append(document.querySelector('.footer-contacts'));
    } else {
        document.querySelector('.footer-col__03').prepend(document.querySelector('.footer-contacts'));
    };
};

moving();
window.addEventListener('resize', moving);const headerFixed = function () {
	if (document.querySelector(".header")) {
		const header = document.querySelector(".header");

		let heightHeader = header.offsetHeight; // высота хедера


		header.parentElement.style.paddingTop = heightHeader + "px"; // даем родителю нужный отступ
	}
};

headerFixed();
// запускаем headerFixed при ресайзе
window.addEventListener("resize", headerFixed);

// при прокрутке даем хедеру клаасс toogle для фиксации
const headerToggle = function () {
	if (document.querySelector(".header")) {
		const header = document.querySelector(".header");

		if (window.scrollY > 0) {
			header.classList.add("toogle");
		} else {
            header.classList.remove("toogle");
        };
	}
};

headerToggle();
// запускаем headerFixed при ресайзе
window.addEventListener("scroll", headerToggle);
// Инициализация слайдера swiper
// https://swiperjs.com/

function initSwiper() {

	if (document.querySelector('.reviews-slider')) {
		const prodSliderInner = new Swiper('.reviews-slider', {
			spaceBetween: 20,
			slidesPerView: 1,
			loop: true,
			autoHeight: false,
			breakpoints: {
				600: {
					slidesPerView: 2,
					// pagination: false,
				},
			},
			pagination: {
				el: ".reviews-slider__pagination",
			},
		});
	};

	if (document.querySelector('.company-slider')) {
		const prodSliderInner = new Swiper('.company-slider', {
			spaceBetween: 16,
			slidesPerView: 2,
			loop: true,
			autoHeight: false,
			breakpoints: {
				600: {
					slidesPerView: 3,
					// pagination: false,
				},
				900: {
					slidesPerView: 4,
					// pagination: false,
				},
				1360: {
					slidesPerView: 5,
					// pagination: false,
				},
			},
			pagination: {
				el: ".company-slider__pagination",
			},
		});
	};


};

// window.addEventListener("resize", initSwiper);
window.addEventListener("resize", function () {
	// setTimeout(initSwiper, 200);
	initSwiper();
	// swiper.init();
});

initSwiper();


// -include './myscripts/form.js'
	// -include './myscripts/accordeon.js'
	// -include './myscripts/blazy-init.js'
  })


